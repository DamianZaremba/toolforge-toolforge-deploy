chartVersion: 0.0.81-20251016082112-1c4f5a64
chartRepository: toolsbeta
backends:
  - name: jobs-api
    path: /jobs
    target:
      namespace: jobs-api
      service: jobs-api
      port: 8443
  - name: builds-api
    path: /builds
    target:
      namespace: builds-api
      service: builds-api
      port: 8443
  - name: envvars-api
    path: /envvars
    target:
      namespace: envvars-api
      service: envvars-api
      port: 8443
  - name: components-api
    path: /components
    target:
      namespace: components-api
      service: components-api
      port: 8443

app:
  log_level: debug
  superusers:
    - service:components-api
  api_maps:
    builds: "https://builds-api.builds-api.svc.toolsbeta.local:8443"
    jobs: "https://jobs-api.jobs-api.svc.toolsbeta.local:8443"
    envvars: "https://envvars-api.envvars-api.svc.toolsbeta.local:8443"
    components: "https://components-api.components-api.svc.toolsbeta.local:8443"
  openapi_docs:
    components: true
    external_servers:
      - url: "https://api.svc.beta.toolforge.org"
        description: "External server."
      - url: "https://api.svc.toolsbeta.eqiad1.wikimedia.cloud:30003"
        description: "Internal server, only reachable from within toolforge."

nginx:
  replicas: 3

certificates:
  internalClusterDomain: toolsbeta.local
  extraNames:
    - api.svc.toolsbeta.eqiad1.wikimedia.cloud
