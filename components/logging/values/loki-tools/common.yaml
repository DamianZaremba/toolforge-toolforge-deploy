# This only needs to be present on one Loki deployment
# to have it provisioned in the right namespace.
# We use loki-tools for that.
extraObjects:
  - apiVersion: networking.k8s.io/v1
    kind: NetworkPolicy
    metadata:
      name: loki-allow-dns
    spec:
      policyTypes:
        - Egress
      podSelector: {}
      egress:
        - to:
            - namespaceSelector:
                matchLabels:
                  kubernetes.io/metadata.name: kube-system
              podSelector:
                matchLabels:
                  k8s-app: kube-dns
          ports:
            - protocol: UDP
              port: 53
